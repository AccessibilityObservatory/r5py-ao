import geopandas
import r5p
import com.conveyal.r5

transport_network = r5p.TransportNetwork(
    osm_pbf="/home/christoph/Dokumente/Helsingin Yliopisto/Papers/Current/2021-10 Slawek’s paper/r5/Helsinki/paakaupunkiseutu.pbf",
    gtfs=[
        "/home/christoph/Dokumente/Helsingin Yliopisto/Papers/Current/2021-10 Slawek’s paper/r5/Helsinki/GTFS.zip"
    ],
)

ykr_centroids = geopandas.read_file(
    "/home/christoph/Dokumente/Helsingin Yliopisto/Papers/Current/2021-10 Slawek’s paper/r5/Helsinki/YKR_250m_PKS.gpkg",
    layer="YKR 250m Pääkaupunkiseutu centroids (EPSG:4326)",
)

request = r5p.RegionalTask(
    transport_network,
    origin=ykr_centroids.iloc[222, ].geometry,
    destinations=ykr_centroids,
    transport_modes=[r5p.TransitMode.TRANSIT],
)
travel_time_computer = com.conveyal.r5.analyst.TravelTimeComputer(
    request, transport_network
)
results = travel_time_computer.computeTravelTimes()
